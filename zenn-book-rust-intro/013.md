# ãƒˆãƒ¬ã‚¤ãƒˆ {#ãƒˆãƒ¬ã‚¤ãƒˆ .View_chapterTitle__tslMs}

## [](#%F0%9F%93%8C-%E3%83%88%E3%83%AC%E3%82%A4%E3%83%88%E3%81%A8%E3%81%AF){.header-anchor-link} ğŸ“Œ ãƒˆãƒ¬ã‚¤ãƒˆã¨ã¯ {#%F0%9F%93%8C-%E3%83%88%E3%83%AC%E3%82%A4%E3%83%88%E3%81%A8%E3%81%AF}

ã™ã§ã«ãƒˆãƒ¬ã‚¤ãƒˆï¼Œã‚³ãƒ”ãƒ¼ãƒˆãƒ¬ã‚¤ãƒˆï¼Œãƒˆãƒ¬ã‚¤ãƒˆå¢ƒç•Œã«ã¤ã„ã¦è§¦ã‚Œã¦ã„ã¾ã™ãŒï¼Œã“ã“ã§ã•ã‚‰ã«è©³ã—ãè§£èª¬ã—ã¾ã™ï¼ã¾ãšã¯ï¼ŒãŠã•ã‚‰ã„ã§ã™ï¼
**ãƒˆãƒ¬ã‚¤ãƒˆ**
ï¼ˆtraitï¼‰ã¯ãƒ‡ãƒ¼ã‚¿å‹ã‚’åˆ†é¡ã™ã‚‹ä»•çµ„ã¿ã®ã“ã¨ã§ã™ï¼ã¾ãŸï¼Œã‚¸ã‚§ãƒãƒªãƒƒã‚¯å‹ã«
**ãƒˆãƒ¬ã‚¤ãƒˆå¢ƒç•Œ** ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ï¼Œãã®å‹ãŒç‰¹å®šã®ãƒˆãƒ¬ã‚¤ãƒˆã®
**ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹**
ã§ã‚ã‚‹ã“ã¨ã‚’åˆ¶ç´„ã—ã¾ã™ï¼ã•ã‚‰ã«ï¼Œãƒˆãƒ¬ã‚¤ãƒˆã«ã¯ç‰¹æœ‰ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ï¼Œå‹ã«å¯¾ã—ã¦å…±é€šã®æŒ¯ã‚‹èˆã„ã‚’å®šç¾©ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ï¼ã¤ã¾ã‚Šï¼Œã‚ã‚‹ãƒˆãƒ¬ã‚¤ãƒˆã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ï¼Œãã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã‚ã‚Œã°å‘¼ã³å‡ºã›ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ï¼ã¾ãŸï¼Œã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã‚ˆã£ã¦ãã®æŒ¯ã‚‹èˆã„ã®å®Ÿè£…ã‚’å¤‰ãˆã‚‹ã“ã¨ã‚‚å‡ºæ¥ã¾ã™ï¼

ãƒˆãƒ¬ã‚¤ãƒˆã‚’å®šç¾©ã™ã‚‹ã«ã¯ `trait`
ã‚’ä½¿ã„ã¾ã™ï¼ãƒˆãƒ¬ã‚¤ãƒˆåã‚’æŒ‡å®šã—ã¦ï¼Œãƒ–ãƒ­ãƒƒã‚¯å†…ã«å…±é€šã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®šç¾©ã—ã¾ã™ï¼ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å´ã§å®Ÿè£…ã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ãŒï¼Œãƒˆãƒ¬ã‚¤ãƒˆå´ã§å®Ÿè£…ã™ã‚‹ã“ã¨ã‚‚å‡ºæ¥ã¾ã™ï¼ã“ã®å ´åˆã¯ï¼Œã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å´ã¯ãƒˆãƒ¬ã‚¤ãƒˆå´ã®å®Ÿè£…ã‚’ãã®ã¾ã¾ä½¿ã†ã“ã¨ã‚‚å‡ºæ¥ã¾ã™ã—ï¼Œãã®æŒ¯ã‚‹èˆã„ã‚’ä¸Šæ›¸ãï¼ˆ
**ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰** ï¼‰ã™ã‚‹ã“ã¨ã‚‚å‡ºæ¥ã¾ã™ï¼

::: code-block-container
``` language-rust
pub trait Geometry {
    fn area(&self) -> f64;
    fn name(&self) -> &str { return "Geometry" }
}
```
:::

ãƒˆãƒ¬ã‚¤ãƒˆã®å®Ÿè£…ã¯ `impl A for B` ã§æŒ‡å®šã—ã¾ã™ï¼ã“ã“ã§ `A`
ã«ã¯ãƒˆãƒ¬ã‚¤ãƒˆåã‚’ï¼Œ `B` ã«ã¯å®Ÿè£…ã™ã‚‹å‹ã‚’æŒ‡å®šã—ã¾ã™ï¼

::: code-block-container
``` language-rust
impl Geometry for Rectangle {
    fn area(&self) -> f64 {
        self.width as f64 * self.height as f64
    }
    fn name(&self) -> &str { return "Rectangle" }
}
```
:::

`Geometry` ãƒˆãƒ¬ã‚¤ãƒˆã‚’å®šç¾©ã—ã¦ï¼Œ `Rectangle`, `Triangle`
ã¨ã„ã†ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å®šç¾©ã™ã‚‹å ´åˆã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼

::: code-block-container
``` language-rust
pub trait Geometry {
    fn area(&self) -> f64;
    fn name(&self) -> &str { return "Geometry" }
}

struct Rectangle { width: u32, height: u32 }

impl Geometry for Rectangle {
    fn area(&self) -> f64 {
        self.width as f64 * self.height as f64
    }
    fn name(&self) -> &str { return "Rectangle" }
}

struct Triangle { bottom: u32, height: u32 }

impl Geometry for Triangle {
    fn area(&self) -> f64 {
        self.bottom as f64 * self.height as f64 * 0.5
    }
    fn name(&self) -> &str { return "Triangle" }
}

fn main() {
    let a = Rectangle { width: 10, height: 20 };
    let b = Triangle  { bottom: 20, height: 5 };
    println!("{} area={}", a.name(), a.area());
    println!("{} area={}", b.name(), b.area());
}
```
:::

## [](#%F0%9F%93%8C-%E3%83%88%E3%83%AC%E3%82%A4%E3%83%88%E7%B6%99%E6%89%BF){.header-anchor-link} ğŸ“Œ ãƒˆãƒ¬ã‚¤ãƒˆç¶™æ‰¿ {#%F0%9F%93%8C-%E3%83%88%E3%83%AC%E3%82%A4%E3%83%88%E7%B6%99%E6%89%BF}

ãƒˆãƒ¬ã‚¤ãƒˆã¯åˆ¥ã®ãƒˆãƒ¬ã‚¤ãƒˆã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ãªã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ï¼ã“ã‚Œã‚’
**ç¶™æ‰¿** ã¨å‘¼ã¶ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ï¼ `trait ç¶™æ‰¿å…ˆ : ç¶™æ‰¿å…ƒ`
ã¨ã„ã†å½¢ã§æŒ‡å®šã—ã¾ã™ï¼ç¶™æ‰¿ã—ãŸã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¯ç¶™æ‰¿å…ƒã®ãƒˆãƒ¬ã‚¤ãƒˆã‚‚å®Ÿè£…ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼

::: code-block-container
``` language-rust
pub trait Geometry {
    ...
}

pub trait Drawable: Geometry {
    ...
}

impl Geometry for Rectangle {
    ...
}

impl Drawable for Rectangle {
    ...
}
```
:::

ãƒˆãƒ¬ã‚¤ãƒˆã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’è¡¨ã™ã«ã¯ `impl A` ã®ã‚ˆã†ã«ã—ã¾ã™ï¼ `A`
ã¯ãƒˆãƒ¬ã‚¤ãƒˆåã§ã™ï¼æ¬¡ã®é–¢æ•°ã®å¼•æ•° `geometry` ã¯ `Geometry`
ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ï¼ã“ã‚ŒãŒãƒˆãƒ¬ã‚¤ãƒˆå¢ƒç•Œã§ã™ï¼

::: code-block-container
``` language-rust
fn draw(geometry: &impl Geometry) {
    ...
}
```
:::

ãƒˆãƒ¬ã‚¤ãƒˆå¢ƒç•Œã®æŒ‡å®šã¯ã‚ˆã‚Šä¾¿åˆ©ãªæ–¹æ³•ãŒã‚ã‚Šã¾ã™ï¼š

::: code-block-container
``` language-rust
fn draw<T: Geometry>(geom1: &T, geom2: &T) {
    ...
}
```
:::

ã¾ãŸï¼Œãƒˆãƒ¬ã‚¤ãƒˆã¯ `+` ã‚’ä½¿ã£ã¦è¤‡æ•°æŒ‡å®šã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ï¼š

::: code-block-container
``` language-rust
fn draw(geometry: &(impl Geometry + Display))
fn draw<T: Geometry + Display>(geometry: &T)
```
:::

ä»–ã«ã‚‚ `where` ã‚’ä½¿ã£ã¦æ¬¡ã®ã‚ˆã†ã«æ›¸ãã“ã¨ã‚‚å‡ºæ¥ã¾ã™ï¼š

::: code-block-container
``` language-rust
fn draw<T>(geometry: &T)
    where T: Summary + Display
```
:::

ã‚¸ã‚§ãƒãƒªãƒƒã‚¯å‹ã«ã‚‚ãƒˆãƒ¬ã‚¤ãƒˆå¢ƒç•Œã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ï¼æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ï¼Œ
`Display` ã¨ `PartialOrd` ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®å ´åˆãªã‚‰ï¼Œ `cmd_display`
ãƒ¡ã‚½ãƒƒãƒ‰ãŒå®Ÿè£…ã•ã‚Œã¾ã™ï¼

::: code-block-container
``` language-rust
use std::fmt::Display;

struct Pair<T> { x: T, y: T }

impl<T> Pair<T> {
    fn new(x: T, y: T) -> Self {
        Self { x, y }
    }
}

impl<T: Display + PartialOrd> Pair<T> {
    fn cmp_display(&self) {
        if self.x >= self.y {
            println!("The largest member is x = {}", self.x);
        } else {
            println!("The largest member is y = {}", self.y);
        }
    }
}
```
:::

## [](#%F0%9F%93%8C-derive%E5%B1%9E%E6%80%A7){.header-anchor-link} ğŸ“Œ deriveå±æ€§ {#%F0%9F%93%8C-derive%E5%B1%9E%E6%80%A7}

ã“ã‚Œã¾ã§ã„ãã¤ã‹ã®ãƒˆãƒ¬ã‚¤ãƒˆã‚’è¦‹ã¦ãã¾ã—ãŸï¼å®Ÿéš›ã«ã¯å¤šãã®ãƒˆãƒ¬ã‚¤ãƒˆãŒã‚ã‚Šï¼Œãã—ã¦ï¼Œå‹ã¯å¤šãã®ãƒˆãƒ¬ã‚¤ãƒˆã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ãªã£ã¦ã„ã¾ã™ï¼ãƒˆãƒ¬ã‚¤ãƒˆã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã™ã‚‹ã«ã¯
`impl`
ã§å®Ÿè£…ã—ãªã‘ã‚Œã°ãªã‚‰ãšï¼Œã¨ã¦ã‚‚é¢å€’ã§ã™ï¼ãã“ã§ï¼Œè¦å®šã®å®Ÿè£…ã‚’ã—ã¦ãã‚Œã‚‹æ©Ÿèƒ½ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ï¼ãã‚ŒãŒ
`derive` å±æ€§ã§ã™ï¼å®Ÿè£…ã—ãŸã„ãƒˆãƒ¬ã‚¤ãƒˆã‚’å‹ã®å®šç¾©æ™‚ã«
`#[derive(trait, â€¦)]` ã¨ã„ã†å½¢ã§æŒ‡å®šã—ã¾ã™ï¼

::: code-block-container
``` language-rust
#[derive(Debug, Copy, Clone)]
pub struct Vec3 {
```
:::

ä»¥ä¸‹ã¯ `derive` å±æ€§ã§ã‚ˆãä½¿ã‚ã‚Œã‚‹ã‚‚ã®ã§ã™ï¼š

  å±æ€§              èª¬æ˜
  ----------------- ---------------------------------------------------------
  Copy              æ‰€æœ‰æ¨©ã®ç§»å‹•ã‚’ã›ãšã«ï¼Œè¤‡è£½ã‚’ä½œæˆã™ã‚‹ãƒãƒ¼ã‚«ãƒ¼ãƒˆãƒ¬ã‚¤ãƒˆ
  Clone             ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®è¤‡è£½ï¼ˆãƒ‡ã‚£ãƒ¼ãƒ—ã‚³ãƒ”ãƒ¼ï¼‰ã‚’ä½œæˆã§ãã‚‹
  Debug             `{:?}` ã§å‡ºåŠ›ã§ãã‚‹
  PartialEq, Eq     `==`, `!=` ãŒä½¿ãˆã‚‹ï¼Eq ã¯ãƒãƒ¼ã‚«ãƒ¼ãƒˆãƒ¬ã‚¤ãƒˆï¼
  PartialOrd, Ord   `<`, `>`, `<=`, `>=` ãŒä½¿ãˆã‚‹ï¼Ord ã¯é †åºä»˜ã‘ãŒã§ãã‚‹ï¼

## [](#%F0%9F%93%8C-from-%E3%83%88%E3%83%AC%E3%82%A4%E3%83%88){.header-anchor-link} ğŸ“Œ From ãƒˆãƒ¬ã‚¤ãƒˆ {#%F0%9F%93%8C-from-%E3%83%88%E3%83%AC%E3%82%A4%E3%83%88}

ã‚ã‚‹å‹ã‹ã‚‰åˆ¥ã®å‹ã«å¤‰æ›ã™ã‚‹ã¨ãã«ï¼Œä¾¿åˆ©ãª `From`
ãƒˆãƒ¬ã‚¤ãƒˆã¨ã„ã†ã®ãŒã‚ã‚Šã¾ã™ï¼ `from`
ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å¯¾å¿œã—ãŸå‹ã”ã¨ã«å®Ÿè£…ã™ã‚‹ã“ã¨ã§ï¼Œãã®å‹ã‹ã‚‰ `into`
ãƒ¡ã‚½ãƒƒãƒ‰ã§å¤‰æ›ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ï¼

::: code-block-container
``` language-rust
#[derive(Debug)]
struct Point { x: f64, y: f64 }

impl From<f64> for Point {
    fn from(input: f64) -> Self {
        Point { x: input, y: input }
    }
}

fn main() {
    let p1 = Point::from(1.0);
    let p2: Point = (1.0).into();
    println!("{:?} {:?}", p1, p2);
}
```
:::
:::
:::
:::

