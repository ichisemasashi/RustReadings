## [ビルドスクリプト](#ビルドスクリプト){.header}

`cargo`による通常のビルドでは十分でないことが時々あります。コード生成や、コンパイルが必要なネイティブコードなど、`cargo`がクレートをうまくコンパイルするにはなんらかの前提条件が必要かもしれません。この問題を解決するため、Cargoが実行できるビルドスクリプトがあります。

ビルドスクリプトをパッケージに追加するには、以下のように`Cargo.toml`の中で指定できます。

``` toml
[package]
...
build = "build.rs"
```

それ以外の場合、Cargoはデフォルトでプロジェクトディレクトリから`build.rs`を探します。

### [ビルドスクリプトの使い方](#ビルドスクリプトの使い方){.header}

ビルドスクリプトは単にRustのファイルの1つで、パッケージ内の他のファイルをコンパイルする前にコンパイルされて起動されます。そのため、クレートの前提条件を満たすために使用できます。

Cargoは、[ここで指定された](https://doc.rust-lang.org/cargo/reference/environment-variables.html#environment-variables-cargo-sets-for-build-scripts)環境変数を介してスクリプトに入力を与えます。

スクリプトは標準出力に出力します。出力される行は全て、`target/debug/build/<pkg>/output`に書き込まれます。さらに、行頭に`cargo:`がついた行はCargoに直接解釈されるため、パッケージのコンパイル時のパラメーターを定義するのに使用できます。

より詳細な仕様や例については、[Cargo
specification](https://doc.rust-lang.org/cargo/reference/build-scripts.html)を参照してください。
:::

